{
	"info": {
		"_postman_id": "true-love-n-collection",
		"name": "true-love-n",
		"description": "True Love N 项目接口集合，包含 ai、base、server 三个子模块",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "ai",
			"item": [
				{
					"name": "健康检查 - root",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{ai_host}}/",
							"host": ["{{ai_host}}"],
							"path": [""]
						}
					},
					"response": []
				},
				{
					"name": "健康检查 - ping",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{ai_host}}/ping",
							"host": ["{{ai_host}}"],
							"path": ["ping"]
						}
					},
					"response": []
				},
				{
					"name": "获取LLM回答",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"token\": \"\",\n    \"content\": \"\",\n    \"wxid\": \"\",\n    \"sender\": \"\"\n}"
						},
						"url": {
							"raw": "{{ai_host}}/get-llm",
							"host": ["{{ai_host}}"],
							"path": ["get-llm"]
						}
					},
					"response": []
				},
				{
					"name": "获取图片类型",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"token\": \"\",\n    \"content\": \"\"\n}"
						},
						"url": {
							"raw": "{{ai_host}}/get-img-type",
							"host": ["{{ai_host}}"],
							"path": ["get-img-type"]
						}
					},
					"response": []
				},
				{
					"name": "生成图片",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"token\": \"\",\n    \"content\": \"\",\n    \"img_data\": \"\",\n    \"wxid\": \"\",\n    \"sender\": \"\"\n}"
						},
						"url": {
							"raw": "{{ai_host}}/gen-img",
							"host": ["{{ai_host}}"],
							"path": ["gen-img"]
						}
					},
					"response": []
				},
				{
					"name": "获取分析",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"token\": \"\",\n    \"content\": \"\",\n    \"img_data\": \"\",\n    \"wxid\": \"\",\n    \"sender\": \"\"\n}"
						},
						"url": {
							"raw": "{{ai_host}}/get-analyze",
							"host": ["{{ai_host}}"],
							"path": ["get-analyze"]
						}
					},
					"response": []
				}
			],
			"description": "AI 模块接口 - 提供 LLM 对话、图片生成、图片分析等功能"
		},
		{
			"name": "base",
			"item": [
				{
					"name": "健康检查 - root",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_host}}/",
							"host": ["{{base_host}}"],
							"path": [""]
						}
					},
					"response": []
				},
				{
					"name": "健康检查 - ping",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_host}}/ping",
							"host": ["{{base_host}}"],
							"path": ["ping"]
						}
					},
					"response": []
				},
				{
					"name": "发送文本消息",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"sendReceiver\": \"\",\n    \"content\": \"\",\n    \"atReceiver\": \"\"\n}"
						},
						"url": {
							"raw": "{{base_host}}/send/text",
							"host": ["{{base_host}}"],
							"path": ["send", "text"]
						}
					},
					"response": []
				},
				{
					"name": "发送图片",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"sendReceiver\": \"\",\n    \"path\": \"\"\n}"
						},
						"url": {
							"raw": "{{base_host}}/send/img",
							"host": ["{{base_host}}"],
							"path": ["send", "img"]
						}
					},
					"response": []
				},
				{
					"name": "发送文件",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"sendReceiver\": \"\",\n    \"path\": \"\"\n}"
						},
						"url": {
							"raw": "{{base_host}}/send/file",
							"host": ["{{base_host}}"],
							"path": ["send", "file"]
						}
					},
					"response": []
				},
				{
					"name": "获取所有联系人",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_host}}/get/all",
							"host": ["{{base_host}}"],
							"path": ["get", "all"]
						}
					},
					"response": []
				},
				{
					"name": "获取群成员",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"room_id\": \"\"\n}"
						},
						"url": {
							"raw": "{{base_host}}/get/by/room-id",
							"host": ["{{base_host}}"],
							"path": ["get", "by", "room-id"]
						}
					},
					"response": []
				},
				{
					"name": "监听状态",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_host}}/listen/status",
							"host": ["{{base_host}}"],
							"path": ["listen", "status"],
							"query": [
								{
									"key": "probe",
									"value": "false",
									"description": "是否执行主动探测（true/false）"
								}
							]
						},
						"description": "获取监听状态（以 DB 为基准）\n\n快速模式（probe=false）：只检查内存状态\n探测模式（probe=true）：执行 ChatInfo 检测\n\n状态：not_listening / listening / healthy / unhealthy"
					},
					"response": []
				},
				{
					"name": "添加监听",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"chat_name\": \"\"\n}"
						},
						"url": {
							"raw": "{{base_host}}/listen/add",
							"host": ["{{base_host}}"],
							"path": ["listen", "add"]
						}
					},
					"response": []
				},
				{
					"name": "移除监听",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"chat_name\": \"\"\n}"
						},
						"url": {
							"raw": "{{base_host}}/listen/remove",
							"host": ["{{base_host}}"],
							"path": ["listen", "remove"]
						}
					},
					"response": []
				},
				{
					"name": "智能刷新监听",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_host}}/listen/refresh",
							"host": ["{{base_host}}"],
							"path": ["listen", "refresh"]
						},
						"description": "智能刷新监听列表（以 DB 为基准，结合健康检测）\n\n流程：\n1. 从 DB 获取配置的监听列表\n2. 执行健康检测（probe=True）\n3. 分类处理：not_listening 执行 add，unhealthy 执行 reset，healthy 不处理"
					},
					"response": []
				},
				{
					"name": "重置单个监听",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"chat_name\": \"\"\n}"
						},
						"url": {
							"raw": "{{base_host}}/listen/reset",
							"host": ["{{base_host}}"],
							"path": ["listen", "reset"]
						},
						"description": "重置单个监听（基于 DB 配置）\n\n只能重置 DB 中已配置的监听"
					},
					"response": []
				},
				{
					"name": "重置所有监听",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_host}}/listen/reset-all",
							"host": ["{{base_host}}"],
							"path": ["listen", "reset-all"]
						},
						"description": "重置所有监听（基于 DB 配置）\n\n以 DB 中的配置为基准，不依赖内存状态"
					},
					"response": []
				},
				{
					"name": "通用执行 - WeChat方法",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"GetMyInfo\",\n    \"params\": {}\n}"
						},
						"url": {
							"raw": "{{base_host}}/execute/wx",
							"host": ["{{base_host}}"],
							"path": ["execute", "wx"]
						},
						"description": "通用执行 WeChat 实例方法\n\n支持的方法示例：\n- GetMyInfo: 获取个人信息\n- IsOnline: 是否在线\n- GetSession: 获取会话列表\n- ChatWith: 打开聊天 {\"who\": \"昵称\"}\n- SendMsg: 发送消息 {\"msg\": \"hello\", \"who\": \"昵称\"}\n- SendFiles: 发送文件 {\"filepath\": \"路径\", \"who\": \"昵称\"}\n- AddListenChat: 添加监听 {\"nickname\": \"昵称\"}\n- RemoveListenChat: 移除监听 {\"nickname\": \"昵称\"}\n- GetSubWindow: 获取子窗口 {\"nickname\": \"昵称\"}\n- GetAllSubWindow: 获取所有子窗口\n- SwitchToChat: 切换到聊天页\n- SwitchToContact: 切换到联系人页\n\n黑名单方法（禁止调用）：ShutDown, KeepRunning, StartListening, StopListening"
					},
					"response": []
				},
				{
					"name": "通用执行 - WeChat.GetMyInfo",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"GetMyInfo\"\n}"
						},
						"url": {
							"raw": "{{base_host}}/execute/wx",
							"host": ["{{base_host}}"],
							"path": ["execute", "wx"]
						},
						"description": "获取当前登录微信的个人信息"
					},
					"response": []
				},
				{
					"name": "通用执行 - WeChat.SendMsg",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"SendMsg\",\n    \"params\": {\n        \"msg\": \"Hello World\",\n        \"who\": \"好友昵称\"\n    }\n}"
						},
						"url": {
							"raw": "{{base_host}}/execute/wx",
							"host": ["{{base_host}}"],
							"path": ["execute", "wx"]
						},
						"description": "通过主窗口发送消息"
					},
					"response": []
				},
				{
					"name": "通用执行 - WeChat.AddListenChat",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"AddListenChat\",\n    \"params\": {\n        \"nickname\": \"好友昵称\"\n    }\n}"
						},
						"url": {
							"raw": "{{base_host}}/execute/wx",
							"host": ["{{base_host}}"],
							"path": ["execute", "wx"]
						},
						"description": "添加监听（自动注入 on_message 回调）"
					},
					"response": []
				},
				{
					"name": "通用执行 - Chat方法",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"chat_name\": \"好友昵称\",\n    \"name\": \"ChatInfo\",\n    \"params\": {}\n}"
						},
						"url": {
							"raw": "{{base_host}}/execute/chat",
							"host": ["{{base_host}}"],
							"path": ["execute", "chat"]
						},
						"description": "通用执行 Chat 子窗口方法\n\n前提：子窗口必须已存在（通过 AddListenChat 创建）\n\n支持的方法示例：\n- ChatInfo: 获取聊天信息\n- SendMsg: 发送消息 {\"msg\": \"hello\"}\n- SendFiles: 发送文件 {\"filepath\": \"路径\"}\n- GetAllMessage: 获取所有消息\n- GetNewMessage: 获取新消息\n- AtAll: @所有人 {\"msg\": \"通知内容\"}\n- Show: 显示窗口\n- Close: 关闭窗口"
					},
					"response": []
				},
				{
					"name": "通用执行 - Chat.ChatInfo",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"chat_name\": \"好友昵称\",\n    \"name\": \"ChatInfo\"\n}"
						},
						"url": {
							"raw": "{{base_host}}/execute/chat",
							"host": ["{{base_host}}"],
							"path": ["execute", "chat"]
						},
						"description": "获取聊天窗口信息（可用于健康检测）"
					},
					"response": []
				},
				{
					"name": "通用执行 - Chat.SendMsg",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"chat_name\": \"好友昵称\",\n    \"name\": \"SendMsg\",\n    \"params\": {\n        \"msg\": \"Hello from sub window\"\n    }\n}"
						},
						"url": {
							"raw": "{{base_host}}/execute/chat",
							"host": ["{{base_host}}"],
							"path": ["execute", "chat"]
						},
						"description": "通过子窗口发送消息"
					},
					"response": []
				},
				{
					"name": "通用执行 - Chat.GetAllMessage",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"chat_name\": \"好友昵称\",\n    \"name\": \"GetAllMessage\"\n}"
						},
						"url": {
							"raw": "{{base_host}}/execute/chat",
							"host": ["{{base_host}}"],
							"path": ["execute", "chat"]
						},
						"description": "获取聊天窗口的所有消息"
					},
					"response": []
				}
			],
			"description": "Base 模块接口 - 提供微信消息发送、联系人管理、监听管理等功能"
		},
		{
			"name": "server",
			"item": [
				{
					"name": "健康检查 - root",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{server_host}}/",
							"host": ["{{server_host}}"],
							"path": [""]
						}
					},
					"response": []
				},
				{
					"name": "健康检查 - ping",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{server_host}}/ping",
							"host": ["{{server_host}}"],
							"path": ["ping"]
						}
					},
					"response": []
				},
				{
					"name": "发送消息",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"token\": \"\",\n    \"sendReceiver\": \"\",\n    \"atReceiver\": \"\",\n    \"content\": \"\"\n}"
						},
						"url": {
							"raw": "{{server_host}}/send-msg",
							"host": ["{{server_host}}"],
							"path": ["send-msg"]
						}
					},
					"response": []
				},
				{
					"name": "聊天消息处理 - 文本",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"token\": \"\",\n    \"msg_type\": \"text\",\n    \"sender\": \"测试用户\",\n    \"chat_id\": \"测试聊天\",\n    \"content\": \"你好\",\n    \"is_group\": false,\n    \"is_self\": false,\n    \"is_at_me\": false,\n    \"image_msg\": null,\n    \"voice_msg\": null,\n    \"video_msg\": null,\n    \"file_msg\": null,\n    \"link_msg\": null,\n    \"refer_msg\": null\n}"
						},
						"url": {
							"raw": "{{server_host}}/get-chat",
							"host": ["{{server_host}}"],
							"path": ["get-chat"]
						}
					},
					"response": []
				},
				{
					"name": "聊天消息处理 - 图片",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"token\": \"\",\n    \"msg_type\": \"image\",\n    \"sender\": \"测试用户\",\n    \"chat_id\": \"测试聊天\",\n    \"content\": \"\",\n    \"is_group\": false,\n    \"is_self\": false,\n    \"is_at_me\": false,\n    \"image_msg\": {\n        \"file_path\": \"wx_imgs/test.jpg\"\n    },\n    \"voice_msg\": null,\n    \"video_msg\": null,\n    \"file_msg\": null,\n    \"link_msg\": null,\n    \"refer_msg\": null\n}"
						},
						"url": {
							"raw": "{{server_host}}/get-chat",
							"host": ["{{server_host}}"],
							"path": ["get-chat"]
						}
					},
					"response": []
				},
				{
					"name": "聊天消息处理 - 语音",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"token\": \"\",\n    \"msg_type\": \"voice\",\n    \"sender\": \"测试用户\",\n    \"chat_id\": \"测试聊天\",\n    \"content\": \"语音转文字内容\",\n    \"is_group\": false,\n    \"is_self\": false,\n    \"is_at_me\": false,\n    \"image_msg\": null,\n    \"voice_msg\": {\n        \"text_content\": \"语音转文字内容\"\n    },\n    \"video_msg\": null,\n    \"file_msg\": null,\n    \"link_msg\": null,\n    \"refer_msg\": null\n}"
						},
						"url": {
							"raw": "{{server_host}}/get-chat",
							"host": ["{{server_host}}"],
							"path": ["get-chat"]
						}
					},
					"response": []
				},
				{
					"name": "聊天消息处理 - 链接",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"token\": \"\",\n    \"msg_type\": \"link\",\n    \"sender\": \"测试用户\",\n    \"chat_id\": \"测试聊天\",\n    \"content\": \"分享链接\",\n    \"is_group\": false,\n    \"is_self\": false,\n    \"is_at_me\": false,\n    \"image_msg\": null,\n    \"voice_msg\": null,\n    \"video_msg\": null,\n    \"file_msg\": null,\n    \"link_msg\": {\n        \"url\": \"https://example.com\"\n    },\n    \"refer_msg\": null\n}"
						},
						"url": {
							"raw": "{{server_host}}/get-chat",
							"host": ["{{server_host}}"],
							"path": ["get-chat"]
						}
					},
					"response": []
				},
				{
					"name": "聊天消息处理 - 引用文本",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"token\": \"\",\n    \"msg_type\": \"refer\",\n    \"sender\": \"测试用户\",\n    \"chat_id\": \"测试聊天\",\n    \"content\": \"这是我的回复\",\n    \"is_group\": false,\n    \"is_self\": false,\n    \"is_at_me\": false,\n    \"image_msg\": null,\n    \"voice_msg\": null,\n    \"video_msg\": null,\n    \"file_msg\": null,\n    \"link_msg\": null,\n    \"refer_msg\": {\n        \"msg_type\": \"text\",\n        \"sender\": \"被引用者\",\n        \"chat_id\": \"测试聊天\",\n        \"content\": \"被引用的文本内容\",\n        \"is_group\": false,\n        \"is_self\": false,\n        \"is_at_me\": false,\n        \"image_msg\": null,\n        \"voice_msg\": null,\n        \"video_msg\": null,\n        \"file_msg\": null,\n        \"link_msg\": null,\n        \"refer_msg\": null\n    }\n}"
						},
						"url": {
							"raw": "{{server_host}}/get-chat",
							"host": ["{{server_host}}"],
							"path": ["get-chat"]
						}
					},
					"response": []
				}
			],
			"description": "Server 模块接口 - 提供消息路由、聊天处理等核心功能"
		}
	],
	"variable": [
		{
			"key": "ai_host",
			"value": "http://localhost:8088",
			"type": "string"
		},
		{
			"key": "base_host",
			"value": "http://localhost:5000",
			"type": "string"
		},
		{
			"key": "server_host",
			"value": "http://localhost:8088",
			"type": "string"
		}
	]
}


